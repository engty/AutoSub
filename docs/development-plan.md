# ğŸ“… Clash AutoSub å¼€å‘è®¡åˆ’

**ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-10-02
**é¢„è®¡æ€»å·¥æœŸ**: 15-22 å·¥ä½œæ—¥
**å½“å‰çŠ¶æ€**: Phase 1 è¿›è¡Œä¸­

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

å¼€å‘ä¸€ä¸ªåŸºäº Node.js + TypeScript + Chrome DevTools MCP çš„ CLI è‡ªåŠ¨åŒ–å·¥å…·ï¼Œè§£å†³åŠ¨æ€ VPN è®¢é˜…åœ°å€é¢‘ç¹æ›´æ–°çš„ç—›ç‚¹ã€‚

---

## ğŸ“Š åŸå§‹ TODO åˆ†æ

### âœ… ä¼˜ç‚¹
1. æ¨¡å—åˆ’åˆ†æ¸…æ™°ï¼ŒæŒ‰å±‚æ¬¡ç»„ç»‡
2. è¦†ç›– PRD æ ¸å¿ƒåŠŸèƒ½
3. ä¾èµ–å…³ç³»åˆç†

### âš ï¸ é—®é¢˜è¯†åˆ«
1. **ç²’åº¦è¿‡ç²—**ï¼šå•ä¸ªä»»åŠ¡åŒ…å«å¤šä¸ªå­æ¨¡å—
2. **ç¼ºå¤±æ¨¡å—**ï¼šå·¥å…·å‡½æ•°å±‚ã€é”™è¯¯å¤„ç†ã€æµ‹è¯•
3. **ä¾èµ–ä¸æ˜**ï¼šæ— æ³•è¯†åˆ«å¯å¹¶è¡Œä»»åŠ¡
4. **æ— æ—¶é—´ä¼°ç®—**ï¼šéš¾ä»¥æŠŠæ§è¿›åº¦

---

## ğŸ—ï¸ ä¼˜åŒ–åçš„ 4 é˜¶æ®µå¼€å‘è®¡åˆ’

### Phase 1: åŸºç¡€è®¾æ–½å±‚ (Foundation)
**ç›®æ ‡**: æ„å»ºé¡¹ç›®åŸºç¡€æ¶æ„
**å·¥æœŸ**: 3-5 å·¥ä½œæ—¥
**å¯å¹¶è¡Œ**: âœ… æ‰€æœ‰ä»»åŠ¡å¯å¹¶è¡Œå¼€å‘

#### ğŸ“‹ ä»»åŠ¡æ¸…å•

| ID | ä»»åŠ¡ | æ–‡ä»¶ | ä¼°æ—¶ | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|------|
| 1.1 | å®Œå–„ TypeScript ç±»å‹å®šä¹‰ | `src/types/index.ts` | 4h | æ—  | ğŸŸ¡ è¿›è¡Œä¸­ |
| 1.2 | å®ç°å·¥å…·å‡½æ•°å±‚ | `src/utils/` | 6h | æ—  | âšª å¾…å¼€å§‹ |
| 1.3 | å®ç°é…ç½®ç®¡ç†æ¨¡å— | `src/config/` | 8h | 1.1 | âšª å¾…å¼€å§‹ |

#### ğŸ“ è¯¦ç»†è¯´æ˜

**Task 1.1: å®Œå–„ TypeScript ç±»å‹å®šä¹‰**
- ğŸ“ `src/types/index.ts`
- â±ï¸ 4 å°æ—¶
- ğŸ“Œ è¾“å‡ºï¼š
  - âœ… æ‰©å±•ç°æœ‰ç±»å‹å®šä¹‰
  - âœ… æ·»åŠ  MCP å“åº”ç±»å‹
  - âœ… æ·»åŠ é€‰æ‹©å™¨é…ç½®ç±»å‹
  - âœ… æ·»åŠ é”™è¯¯ç±»å‹æšä¸¾
  - âœ… æ·»åŠ å‘½ä»¤å‚æ•°ç±»å‹

**Task 1.2: å®ç°å·¥å…·å‡½æ•°å±‚**
- ğŸ“ `src/utils/logger.ts` - æ—¥å¿—ç³»ç»Ÿ (2h)
  - æ§åˆ¶å°å½©è‰²è¾“å‡ºï¼ˆchalkï¼‰
  - æ—¥å¿—çº§åˆ«ï¼ˆdebug/info/warn/errorï¼‰
  - æ–‡ä»¶æ—¥å¿—è®°å½•
- ğŸ“ `src/utils/crypto.ts` - åŠ å¯†å·¥å…· (2h)
  - AES åŠ å¯†/è§£å¯†å‡­è¯
  - å¯†é’¥ç®¡ç†
- ğŸ“ `src/utils/file.ts` - æ–‡ä»¶æ“ä½œ (2h)
  - å¤‡ä»½æ–‡ä»¶åˆ›å»º
  - ç›®å½•æ£€æµ‹å’Œåˆ›å»º
  - é…ç½®æ–‡ä»¶è¯»å†™

**Task 1.3: å®ç°é…ç½®ç®¡ç†æ¨¡å—**
- ğŸ“ `src/config/manager.ts` - é…ç½®ç®¡ç†å™¨ (4h)
  - é…ç½®æ–‡ä»¶åŠ è½½/ä¿å­˜
  - é…ç½®ç‰ˆæœ¬è¿ç§»
  - é»˜è®¤é…ç½®ç”Ÿæˆ
- ğŸ“ `src/config/schema.ts` - é…ç½®æ ¡éªŒ (2h)
  - YAML schema å®šä¹‰
  - é…ç½®æ ¼å¼éªŒè¯
- ğŸ“ `src/config/paths.ts` - è·¯å¾„ç®¡ç† (2h)
  - é…ç½®ç›®å½•ï¼š`~/.autosub/`
  - Clash è·¯å¾„è‡ªåŠ¨æ£€æµ‹

#### âœ… é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰ç±»å‹å®šä¹‰æ—  TypeScript é”™è¯¯
- [ ] å·¥å…·å‡½æ•°æœ‰å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] é…ç½®ç®¡ç†å™¨å¯æ­£ç¡®åŠ è½½/ä¿å­˜ YAML
- [ ] æ—¥å¿—ç³»ç»Ÿè¾“å‡ºæ ¼å¼ç»Ÿä¸€

---

### Phase 2: æ ¸å¿ƒå¼•æ“å±‚ (Core Engine)
**ç›®æ ‡**: å®ç° MCP é›†æˆå’Œå‡­è¯æ•è·
**å·¥æœŸ**: 5-7 å·¥ä½œæ—¥
**å…³é”®é£é™©**: MCP è¿æ¥ç¨³å®šæ€§ã€ç½‘ç»œè¯·æ±‚æ‹¦æˆªå‡†ç¡®æ€§

#### ğŸ“‹ ä»»åŠ¡æ¸…å•

| ID | ä»»åŠ¡ | æ–‡ä»¶ | ä¼°æ—¶ | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|------|
| 2.1 | MCP å®¢æˆ·ç«¯åŸºç¡€è¿æ¥ | `src/core/mcp/client.ts` | 6h | 1.1, 1.2 | âšª å¾…å¼€å§‹ |
| 2.2 | ç½‘ç»œè¯·æ±‚ç›‘å¬å’Œæ‹¦æˆª | `src/core/mcp/network.ts` | 8h | 2.1 | âšª å¾…å¼€å§‹ |
| 2.3 | Cookie/Storage æ•è· | `src/core/auth/cookie-capture.ts` | 6h | 2.1 | âšª å¾…å¼€å§‹ |
| 2.4 | Token æå–æ¨¡å— | `src/core/auth/token-extractor.ts` | 8h | 2.2 | âšª å¾…å¼€å§‹ |

#### ğŸ“ è¯¦ç»†è¯´æ˜

**Task 2.1: MCP å®¢æˆ·ç«¯åŸºç¡€è¿æ¥**
- ğŸ“ `src/core/mcp/client.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… è¿æ¥ Chrome DevTools MCP Server
  - âœ… å®ç° `navigatePage(url)` - æ‰“å¼€ç™»å½•é¡µ
  - âœ… å®ç° `waitForElement(selector)` - ç­‰å¾…é¡µé¢åŠ è½½
  - âœ… å®ç° `handleDialog()` - å¤„ç†å¼¹çª—
  - âœ… æ”¯æŒ `--isolated=true` ç‹¬ç«‹æµè§ˆå™¨å®ä¾‹
- ğŸ”— ä¾èµ–ï¼š`@modelcontextprotocol/sdk`

**Task 2.2: ç½‘ç»œè¯·æ±‚ç›‘å¬å’Œæ‹¦æˆª**
- ğŸ“ `src/core/mcp/network.ts`
- â±ï¸ 8 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… ä½¿ç”¨ `list_network_requests` è·å–è¯·æ±‚åˆ—è¡¨
  - âœ… è¿‡æ»¤åŒ…å« `api|token|subscription` çš„è¯·æ±‚
  - âœ… ä½¿ç”¨ `get_network_request(url)` è·å–è¯¦æƒ…
  - âœ… è§£æ JSON å“åº”ä½“
  - âœ… æå–è®¢é˜…åœ°å€æˆ– Token
- ğŸ“Š æµ‹è¯•ç«™ç‚¹ï¼šç³–æœäº‘ API

**Task 2.3: Cookie/Storage æ•è·**
- ğŸ“ `src/core/auth/cookie-capture.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… ä½¿ç”¨ `evaluate_script` è¯»å– `document.cookie`
  - âœ… è¯»å– `localStorage` å’Œ `sessionStorage`
  - âœ… åºåˆ—åŒ–ä¸º JSON æ ¼å¼
  - âœ… ä½¿ç”¨ crypto.ts åŠ å¯†å­˜å‚¨
- ğŸ” å®‰å…¨ï¼šæœ¬åœ°åŠ å¯†ï¼Œå¯†é’¥ç”±ç”¨æˆ·è®¾ç½®

**Task 2.4: Token æå–æ¨¡å—**
- ğŸ“ `src/core/auth/token-extractor.ts`
- â±ï¸ 8 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… ä» API å“åº”ä½“æå– Token
  - âœ… æ”¯æŒå¤šç§ Token æ ¼å¼ï¼ˆBearer, Custom Headerï¼‰
  - âœ… æ”¯æŒ Token æ‹¼æ¥è®¢é˜… URL
  - âœ… éªŒè¯ Token æœ‰æ•ˆæ€§ï¼ˆéç©ºã€æ ¼å¼æ­£ç¡®ï¼‰

#### âœ… é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] MCP å®¢æˆ·ç«¯å¯ç¨³å®šè¿æ¥
- [ ] æˆåŠŸæ•è·ç³–æœäº‘ç™»å½•å‡­è¯
- [ ] ç½‘ç»œè¯·æ±‚æ‹¦æˆªå‡†ç¡®ç‡ > 95%
- [ ] å‡­è¯åŠ å¯†å­˜å‚¨å¯é 

---

### Phase 3: ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic)
**ç›®æ ‡**: å®ç°è®¢é˜…æŠ“å–ã€éªŒè¯å’Œæ›´æ–°
**å·¥æœŸ**: 4-6 å·¥ä½œæ—¥
**å…³é”®åŠŸèƒ½**: æ™ºèƒ½éƒ¨åˆ†æ›´æ–°æœºåˆ¶

#### ğŸ“‹ ä»»åŠ¡æ¸…å•

| ID | ä»»åŠ¡ | æ–‡ä»¶ | ä¼°æ—¶ | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|------|
| 3.1 | è®¢é˜…æŠ“å– - API æ¨¡å¼ | `src/core/scraper/api-mode.ts` | 6h | 2.2, 2.4 | âšª å¾…å¼€å§‹ |
| 3.2 | è®¢é˜…æŠ“å– - DOM æ¨¡å¼ | `src/core/scraper/dom-mode.ts` | 6h | 2.1 | âšª å¾…å¼€å§‹ |
| 3.3 | è®¢é˜…åœ°å€éªŒè¯ | `src/core/validator/subscription.ts` | 6h | æ—  | âšª å¾…å¼€å§‹ |
| 3.4 | Clash é…ç½®æ›´æ–° | `src/core/updater/clash.ts` | 8h | 1.3, 3.3 | âšª å¾…å¼€å§‹ |
| 3.5 | æ™ºèƒ½éƒ¨åˆ†æ›´æ–°æœºåˆ¶ | `src/core/updater/partial-update.ts` | 6h | 3.4 | âšª å¾…å¼€å§‹ |

#### ğŸ“ è¯¦ç»†è¯´æ˜

**Task 3.1: è®¢é˜…æŠ“å– - API æ¨¡å¼ï¼ˆä¼˜å…ˆï¼‰**
- ğŸ“ `src/core/scraper/api-mode.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ ç­–ç•¥ï¼š
  - âœ… ç›‘å¬åŒ…å«è®¢é˜…åœ°å€çš„ API å“åº”
  - âœ… æ”¯æŒ GET/POST è¯·æ±‚è§£æ
  - âœ… å¤„ç†åˆ†é¡µ APIï¼ˆå¦‚æœéœ€è¦ï¼‰
  - âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•ï¼ˆ3æ¬¡ï¼‰

**Task 3.2: è®¢é˜…æŠ“å– - DOM æ¨¡å¼ï¼ˆå¤‡ç”¨ï¼‰**
- ğŸ“ `src/core/scraper/dom-mode.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ ç­–ç•¥ï¼š
  - âœ… ä½¿ç”¨ `take_snapshot` è·å–é¡µé¢æ–‡æœ¬
  - âœ… ä½¿ç”¨ `evaluate_script` æŸ¥æ‰¾è®¢é˜…æŒ‰é’®
  - âœ… æ”¯æŒå¤šé‡é€‰æ‹©å™¨ï¼ˆä¼˜å…ˆçº§æ•°ç»„ï¼‰
  - âœ… ä» GitHub åŠ è½½é€‰æ‹©å™¨é…ç½®

**Task 3.3: è®¢é˜…åœ°å€éªŒè¯**
- ğŸ“ `src/core/validator/subscription.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ éªŒè¯è§„åˆ™ï¼š
  - âœ… HTTP çŠ¶æ€ç  = 200
  - âœ… å†…å®¹åŒ…å« `proxies` æˆ– `proxy-groups`
  - âœ… YAML æ ¼å¼è§£ææˆåŠŸ
  - âœ… èŠ‚ç‚¹æ•°é‡ > 0
  - âœ… è¶…æ—¶æ—¶é—´ï¼š10ç§’
- ğŸš« å¤±è´¥ä¸å…è®¸å¼ºåˆ¶æ›´æ–°

**Task 3.4: Clash é…ç½®æ›´æ–°**
- ğŸ“ `src/core/updater/clash.ts`
- â±ï¸ 8 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… è¯»å– Clash YAML é…ç½®
  - âœ… å®šä½ `proxy-providers` éƒ¨åˆ†
  - âœ… æ›´æ–°å¯¹åº”ç«™ç‚¹çš„ `url` å­—æ®µ
  - âœ… è‡ªåŠ¨å¤‡ä»½ï¼ˆä¿ç•™ 5 ä¸ªç‰ˆæœ¬ï¼‰
  - âœ… æ›´æ–°å¤±è´¥è‡ªåŠ¨å›æ»š

**Task 3.5: æ™ºèƒ½éƒ¨åˆ†æ›´æ–°æœºåˆ¶**
- ğŸ“ `src/core/updater/partial-update.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ æ ¸å¿ƒé€»è¾‘ï¼š
  - âœ… é€ä¸ªç«™ç‚¹è·å–è®¢é˜…åœ°å€
  - âœ… éªŒè¯æ¯ä¸ªè®¢é˜…åœ°å€
  - âœ… æˆåŠŸçš„æ›´æ–°ï¼Œå¤±è´¥çš„ä¿ç•™åŸé…ç½®
  - âœ… ç”Ÿæˆæ›´æ–°æŠ¥å‘Šï¼ˆæˆåŠŸ/å¤±è´¥æ˜ç»†ï¼‰

#### âœ… é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] API æ¨¡å¼æˆåŠŸç‡ > 90%
- [ ] DOM æ¨¡å¼ä½œä¸ºå¤‡ç”¨å¯ç”¨
- [ ] è®¢é˜…éªŒè¯æ— è¯¯åˆ¤
- [ ] éƒ¨åˆ†æ›´æ–°é›¶é…ç½®æŸå
- [ ] å¤‡ä»½å’Œå›æ»šåŠŸèƒ½æ­£å¸¸

---

### Phase 4: ç”¨æˆ·ç•Œé¢å±‚ (User Interface)
**ç›®æ ‡**: å®ç° CLI äº¤äº’ç•Œé¢
**å·¥æœŸ**: 3-4 å·¥ä½œæ—¥
**é‡ç‚¹**: ZCF é£æ ¼çš„å‘å¯¼å¼ä½“éªŒ

#### ğŸ“‹ ä»»åŠ¡æ¸…å•

| ID | ä»»åŠ¡ | æ–‡ä»¶ | ä¼°æ—¶ | ä¾èµ– | çŠ¶æ€ |
|----|------|------|------|------|------|
| 4.1 | äº¤äº’å¼é…ç½®å‘å¯¼ | `src/cli/commands/setup.ts` | 8h | Phase 1-3 å…¨éƒ¨ | âšª å¾…å¼€å§‹ |
| 4.2 | æ›´æ–°å‘½ä»¤å¤„ç†å™¨ | `src/cli/commands/update.ts` | 6h | Phase 3 | âšª å¾…å¼€å§‹ |
| 4.3 | çŠ¶æ€æŸ¥çœ‹å‘½ä»¤ | `src/cli/commands/status.ts` | 4h | 1.3 | âšª å¾…å¼€å§‹ |
| 4.4 | å®šæ—¶ä»»åŠ¡é…ç½® | `src/cli/commands/cron.ts` | 6h | 4.2 | âšª å¾…å¼€å§‹ |
| 4.5 | ä¸»äº¤äº’å¼èœå• | `src/cli/menu.ts` | 6h | 4.1-4.4 | âšª å¾…å¼€å§‹ |

#### ğŸ“ è¯¦ç»†è¯´æ˜

**Task 4.1: äº¤äº’å¼é…ç½®å‘å¯¼ (`setup` å‘½ä»¤)**
- ğŸ“ `src/cli/commands/setup.ts`
- â±ï¸ 8 å°æ—¶
- ğŸ“Œ æµç¨‹ï¼ˆå€Ÿé‰´ ZCFï¼‰ï¼š
  1. æ¬¢è¿ç•Œé¢ï¼ˆChalk å½©è‰²è¾“å‡ºï¼‰
  2. æ£€æµ‹ Clash é…ç½®è·¯å¾„ï¼ˆè‡ªåŠ¨ + æ‰‹åŠ¨ï¼‰
  3. é€‰æ‹©é¢„å®šä¹‰ç«™ç‚¹æˆ–è‡ªå®šä¹‰
  4. æ‰“å¼€ MCP æµè§ˆå™¨ï¼Œç­‰å¾…æ‰‹åŠ¨ç™»å½•
  5. æ•è·å‡­è¯å¹¶ä¿å­˜
  6. éªŒè¯è®¢é˜…åœ°å€
  7. å®Œæˆæç¤ºå’Œä¸‹ä¸€æ­¥å»ºè®®
- ğŸ¨ ç»„ä»¶ï¼šInquirer.js + Ora + Chalk

**Task 4.2: æ›´æ–°å‘½ä»¤å¤„ç†å™¨ (`update` å‘½ä»¤)**
- ğŸ“ `src/cli/commands/update.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… `autosub update` - æ›´æ–°æ‰€æœ‰ç«™ç‚¹
  - âœ… `autosub update <ç«™ç‚¹å>` - æ›´æ–°æŒ‡å®šç«™ç‚¹
  - âœ… `--silent` é™é»˜æ¨¡å¼ï¼ˆCron ä½¿ç”¨ï¼‰
  - âœ… è¿›åº¦æ¡æ˜¾ç¤ºï¼ˆOraï¼‰
  - âœ… æ›´æ–°æŠ¥å‘Šè¡¨æ ¼ï¼ˆcli-table3ï¼‰

**Task 4.3: çŠ¶æ€æŸ¥çœ‹å‘½ä»¤ (`status` å‘½ä»¤)**
- ğŸ“ `src/cli/commands/status.ts`
- â±ï¸ 4 å°æ—¶
- ğŸ“Œ æ˜¾ç¤ºå†…å®¹ï¼š
  - âœ… é…ç½®ç«™ç‚¹åˆ—è¡¨
  - âœ… æœ€åæ›´æ–°æ—¶é—´
  - âœ… è®¢é˜…åœ°å€çŠ¶æ€ï¼ˆæœ‰æ•ˆ/å¤±æ•ˆï¼‰
  - âœ… Clash é…ç½®è·¯å¾„
  - âœ… å®šæ—¶ä»»åŠ¡çŠ¶æ€

**Task 4.4: å®šæ—¶ä»»åŠ¡é…ç½® (`cron` å‘½ä»¤)**
- ğŸ“ `src/cli/commands/cron.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ åŠŸèƒ½ï¼š
  - âœ… `autosub cron` - è®¾ç½®å®šæ—¶æ›´æ–°
  - âœ… è‡ªåŠ¨é…ç½® Crontab (macOS/Linux)
  - âœ… é…ç½® Task Scheduler (Windows)
  - âœ… åˆ é™¤å®šæ—¶ä»»åŠ¡
  - âœ… æŸ¥çœ‹å®šæ—¶ä»»åŠ¡çŠ¶æ€

**Task 4.5: ä¸»äº¤äº’å¼èœå•**
- ğŸ“ `src/cli/menu.ts`
- â±ï¸ 6 å°æ—¶
- ğŸ“Œ èœå•é€‰é¡¹ï¼š
  1. ğŸš€ æ›´æ–°è®¢é˜…åœ°å€
  2. âš™ï¸  é…ç½®æ–°ç«™ç‚¹
  3. ğŸ“Š æŸ¥çœ‹çŠ¶æ€
  4. â° è®¾ç½®å®šæ—¶ä»»åŠ¡
  5. ğŸ”„ åˆ·æ–°å‡­è¯ï¼ˆé‡æ–°ç™»å½•ï¼‰
  6. âŒ é€€å‡º
- ğŸ¨ ä½¿ç”¨ Inquirer.js list ç±»å‹

#### âœ… é˜¶æ®µéªŒæ”¶æ ‡å‡†
- [ ] é…ç½®å‘å¯¼æµç¨‹é¡ºç•…
- [ ] æ‰€æœ‰å‘½ä»¤è¿è¡Œæ— é”™è¯¯
- [ ] CLI è¾“å‡ºç¾è§‚ï¼ˆå½©è‰²ã€è¡¨æ ¼ã€è¿›åº¦æ¡ï¼‰
- [ ] å®šæ—¶ä»»åŠ¡é…ç½®æˆåŠŸ

---

## ğŸ“Š å¼€å‘è¿›åº¦è¿½è¸ª

### å½“å‰çŠ¶æ€
- âœ… **å·²å®Œæˆ**ï¼š0/17 ä»»åŠ¡ (0%)
- ğŸŸ¡ **è¿›è¡Œä¸­**ï¼š1/17 ä»»åŠ¡ (Phase 1.1)
- âšª **å¾…å¼€å§‹**ï¼š16/17 ä»»åŠ¡

### æ—¶é—´ä¼°ç®—
| é˜¶æ®µ | ä»»åŠ¡æ•° | æ€»å·¥æ—¶ | å·¥ä½œæ—¥ | çŠ¶æ€ |
|------|--------|--------|--------|------|
| Phase 1 | 3 | 18h | 3-5å¤© | ğŸŸ¡ è¿›è¡Œä¸­ |
| Phase 2 | 4 | 28h | 5-7å¤© | âšª å¾…å¼€å§‹ |
| Phase 3 | 5 | 32h | 4-6å¤© | âšª å¾…å¼€å§‹ |
| Phase 4 | 5 | 30h | 3-4å¤© | âšª å¾…å¼€å§‹ |
| **æ€»è®¡** | **17** | **108h** | **15-22å¤©** | - |

---

## ğŸš¨ é£é™©ä¸ç¼“è§£

### é«˜é£é™©é¡¹
1. **MCP è¿æ¥ç¨³å®šæ€§** (Phase 2.1)
   - ç¼“è§£ï¼šæå‰æµ‹è¯• Chrome DevTools MCPï¼Œå‡†å¤‡ Playwright å¤‡ç”¨æ–¹æ¡ˆ

2. **ç½‘ç»œè¯·æ±‚æ‹¦æˆªå‡†ç¡®æ€§** (Phase 2.2)
   - ç¼“è§£ï¼šä½¿ç”¨ç³–æœäº‘çœŸå®ç¯å¢ƒæµ‹è¯•ï¼Œè®°å½•æ‰€æœ‰ API æ¨¡å¼

3. **è®¢é˜…åœ°å€éªŒè¯è¯¯åˆ¤** (Phase 3.3)
   - ç¼“è§£ï¼šå¤šé‡éªŒè¯è§„åˆ™ï¼Œæä¾›æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°é€‰é¡¹ï¼ˆä»…å¼€å‘æ¨¡å¼ï¼‰

### ä¸­é£é™©é¡¹
1. **Clash é…ç½®æ›´æ–°å…¼å®¹æ€§** (Phase 3.4)
   - ç¼“è§£ï¼šæ”¯æŒå¤šç‰ˆæœ¬ Clash YAML æ ¼å¼

2. **å®šæ—¶ä»»åŠ¡è·¨å¹³å°å…¼å®¹** (Phase 4.4)
   - ç¼“è§£ï¼šåˆ†åˆ«å®ç° Cron (macOS/Linux) å’Œ Task Scheduler (Windows)

---

## ğŸ¯ é‡Œç¨‹ç¢‘

### Milestone 1: åŸºç¡€è®¾æ–½å®Œæˆ (Day 5)
- [ ] æ‰€æœ‰ç±»å‹å®šä¹‰å®Œæˆ
- [ ] å·¥å…·å‡½æ•°å±‚å¯ç”¨
- [ ] é…ç½®ç®¡ç†æ¨¡å—é€šè¿‡æµ‹è¯•

### Milestone 2: æ ¸å¿ƒå¼•æ“å®Œæˆ (Day 12)
- [ ] MCP å®¢æˆ·ç«¯ç¨³å®šè¿æ¥
- [ ] æˆåŠŸæ•è·å‡­è¯
- [ ] Token æå–æˆåŠŸç‡ > 90%

### Milestone 3: ä¸šåŠ¡é€»è¾‘å®Œæˆ (Day 18)
- [ ] è®¢é˜…åœ°å€æŠ“å–æˆåŠŸ
- [ ] éªŒè¯æœºåˆ¶å¯é 
- [ ] Clash é…ç½®æ›´æ–°æ— æŸå

### Milestone 4: MVP å‘å¸ƒ (Day 22)
- [ ] æ‰€æœ‰ CLI å‘½ä»¤å¯ç”¨
- [ ] é…ç½®å‘å¯¼æµç¨‹å®Œæ•´
- [ ] é€šè¿‡ç«¯åˆ°ç«¯æµ‹è¯•

---

## ğŸ”„ è¿­ä»£ç­–ç•¥

### è¿­ä»£ 1: å‚ç›´åˆ‡ç‰‡ï¼ˆæ¨èä¼˜å…ˆï¼‰
**ç›®æ ‡**: å¿«é€ŸéªŒè¯æŠ€æœ¯å¯è¡Œæ€§

1. **Day 1-2**: Phase 1.1 + 1.2ï¼ˆç±»å‹ + å·¥å…·ï¼‰
2. **Day 3-5**: Phase 2.1 + 2.3ï¼ˆMCP è¿æ¥ + Cookie æ•è·ï¼‰
3. **Day 6-7**: Phase 3.1 + 3.3ï¼ˆAPI æŠ“å– + éªŒè¯ï¼‰
4. **Day 8-9**: Phase 3.4ï¼ˆClash æ›´æ–°ï¼‰
5. **Day 10**: Phase 4.2ï¼ˆupdate å‘½ä»¤ï¼‰

âœ… **éªŒæ”¶**: ç«¯åˆ°ç«¯æµç¨‹èµ°é€šï¼Œå¯æ‰‹åŠ¨æ›´æ–°ä¸€ä¸ªç«™ç‚¹

### è¿­ä»£ 2: åŠŸèƒ½å®Œå–„
**ç›®æ ‡**: è¡¥å…¨å‰©ä½™åŠŸèƒ½

6. **Day 11-12**: Phase 2.2 + 2.4ï¼ˆç½‘ç»œæ‹¦æˆª + Tokenï¼‰
7. **Day 13-14**: Phase 3.2 + 3.5ï¼ˆDOM æ¨¡å¼ + éƒ¨åˆ†æ›´æ–°ï¼‰
8. **Day 15-16**: Phase 4.1 + 4.3ï¼ˆsetup + statusï¼‰
9. **Day 17-18**: Phase 4.4 + 4.5ï¼ˆcron + èœå•ï¼‰
10. **Day 19-22**: æµ‹è¯• + æ–‡æ¡£ + å‘å¸ƒ

---

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- âœ… ESM æ¨¡å—ï¼ˆ`import/export`ï¼‰
- âœ… TypeScript strict æ¨¡å¼
- âœ… éµå¾ª SOLID åŸåˆ™
- âœ… å•ä¸€èŒè´£ï¼šæ¯ä¸ªæ–‡ä»¶åªåšä¸€ä»¶äº‹

### æäº¤è§„èŒƒï¼ˆConventional Commitsï¼‰
- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤ bug
- `refactor:` é‡æ„
- `docs:` æ–‡æ¡£æ›´æ–°
- `test:` æµ‹è¯•ç›¸å…³

### æµ‹è¯•è¦æ±‚
- å·¥å…·å‡½æ•°å±‚ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- æ ¸å¿ƒæ¨¡å—ï¼šé›†æˆæµ‹è¯•å¿…é¡»é€šè¿‡
- CLI å‘½ä»¤ï¼šç«¯åˆ°ç«¯æµ‹è¯•

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹
1. **å®Œæˆ Phase 1.1** (å½“å‰ä»»åŠ¡)
   - æ‰©å±• `src/types/index.ts`
   - æ·»åŠ  MCP å“åº”ç±»å‹ã€é€‰æ‹©å™¨é…ç½®ç±»å‹

2. **å‡†å¤‡ Phase 1.2**
   - åˆ›å»º `src/utils/` ç›®å½•
   - å‚è€ƒ ZCF çš„ logger å®ç°

### å»ºè®®å·¥ä½œæµ
```bash
# 1. åˆ‡æ¢åˆ° Dev ä»£ç†
*agent dev

# 2. å¼€å§‹ç¼–ç 
npm run dev  # å¼€å‘æ¨¡å¼

# 3. æµ‹è¯•
npm run typecheck  # ç±»å‹æ£€æŸ¥
npm run test       # è¿è¡Œæµ‹è¯•

# 4. æ„å»º
npm run build      # ç¼–è¯‘ TypeScript
```

---

## ğŸ“š å‚è€ƒèµ„æº

### æŠ€æœ¯æ–‡æ¡£
- [Chrome DevTools MCP æ–‡æ¡£](https://github.com/modelcontextprotocol/servers/tree/main/src/chrome-devtools)
- [Inquirer.js ç¤ºä¾‹](https://github.com/SBoudrias/Inquirer.js/tree/master/packages/inquirer/examples)
- [ZCF é¡¹ç›®å‚è€ƒ](https://github.com/zerocloude/zcf)

### å†…éƒ¨æ–‡æ¡£
- PRD: `docs/prd.md`
- æ¶æ„æ–‡æ¡£: `docs/architecture.md`
- é¡¹ç›®ç®€æŠ¥: `docs/project-brief.md`

---

**æœ€åæ›´æ–°**: 2025-10-02
**ç»´æŠ¤è€…**: BMad Orchestrator
